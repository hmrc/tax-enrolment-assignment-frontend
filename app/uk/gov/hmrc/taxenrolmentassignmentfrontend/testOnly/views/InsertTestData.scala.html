@*
 * Copyright 2024 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.taxenrolmentassignmentfrontend.views.html.Layout
@import uk.gov.hmrc.govukfrontend.views.html.components._
@import uk.gov.hmrc.govukfrontend.views.html.components.implicits._
@import uk.gov.hmrc.taxenrolmentassignmentfrontend.testOnly.controllers.routes
@import cats.implicits.toTraverseOps

@this(
    layout: Layout,
    formHelper: FormWithCSRF,
    govukButton: GovukButton,
    govukTextarea : GovukTextarea
)

@()(implicit request: Request[AnyRef], messages: Messages)

@layout(pageTitle = Some("Insert Test Data"), displaySignout = false){

    <h1 class="govuk-heading-l">Enter Test Data</h1>
    @formHelper(action = routes.TestOnlyController.insertCustomTestData) {

        @govukTextarea(Textarea(
            id = "user-data",
            name = "user-data",
            rows = 32,
            label = Label(
                isPageHeading = true,
                classes = "govuk-label--l",
                content = Text("Enter JSON for the user you'd like to add"),
            ),
            hint = Some(Hint(
                content = Text("Example is a single GG user with SA and PT enrolment")
            )),
            value = Some("""
                [
                    {
                        "groupId": "1B958C76-8F5B-406A-B2D6-CB3B7D92E063",
                        "affinityGroup": "Individual",
                        "nino": "JS347435A",
                        "user": {
                            "credId": "1358163060829375",
                            "name": "Firstname Surname",
                            "email": "email10@test.com",
                            "userId": "Ending with 9711",
                            "hasPTEnrolment": true,
                            "hasSAEnrolment": true
                        },
                        "enrolments": [
                        {
                            "serviceName": "IR-SA",
                            "assignedUserCreds": [
                                "1"
                            ],
                            "identifiers": {
                                "key": "UTR",
                                "value": "AA543003E"
                            },
                            "verifiers": [
                            {
                                "key": "Postcode",
                                "value": "postcode"
                            },
                            {
                                "key": "NINO",
                                "value": "JS347435A"
                            }
                            ],
                            "enrolmentFriendlyName": "IR-SA Enrolment",
                            "state": "Activated",
                            "enrolmentType": "principal",
                            "assignedToAll": false
                        },
                        {
                            "serviceName": "HMRC-PT",
                            "identifiers": {
                                "key": "NINO",
                                "value": "JS347435A"
                            },
                            "verifiers": [
                                {
                                    "key": "NINO1",
                                    "value": "JS347435A"
                                }
                            ],
                            "enrolmentFriendlyName": "HMRC-PT Enrolment",
                            "state": "Activated",
                            "enrolmentType": "principal",
                            "assignedToAll": false
                            }
                            ],
                            "additionalFactors": [
                            {
                                "factorType": "totp",
                                "name": "HMRC App"
                            }
                        ]
                    }
                ]
            """)
        ))

        @govukButton(Button(
            preventDoubleClick = Some(true),
            content = Text(messages("enrolledForPT.continue")),
            id = Some("submit")
        ))
    }
}
